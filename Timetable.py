import streamlit as st

# Define the timetable data for all sections
timetables = {
    "First_Year_Section_A": {
        "Monday": {
            "8:30-9:30": ["Room(245)"],
            "9:40-10:40": ["Room(245)"],
            "10:50-11:50": ["Room(321)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(321)"],
            "1:50-2:50": ["Room(321)"],
            "3:00-4:00": ["Room(321)"]
        },
        "Tuesday": {
            "8:30-9:30": [""],  # Free
            "9:40-10:40": ["Room(231)"],
            "10:50-11:50": ["Room(321)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(231)"],
            "1:50-2:50": ["Room(321)"],
            "3:00-4:00": ["Room(244)"]
        },
        "Wednesday": {
            "8:30-9:30": ["Room(321)"],
            "9:40-10:40": [""],  # Free
            "10:50-11:50": ["Room(321)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(321)"],
            "1:50-2:50": [""],  # Free
            "3:00-4:00": [""]
        },
        "Thursday": {
            "8:30-9:30": ["Room(321)"],
            "9:40-10:40": ["Room(321)"],
            "10:50-11:50": ["Room(321)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(336)"],
            "1:50-2:50": ["Room(245)"],
            "3:00-4:00": ["Room(245)"]
        },
        "Friday": {
            "8:30-9:30": [""],  # Free
            "9:40-10:40": ["Room(321)"],
            "10:50-11:50": ["Room(321)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": [""],  # Free
            "1:50-2:50": ["Room(321)"],
            "3:00-4:00": ["Room(321)"]
        }
    },
    "First_Year_Section_B": {
    "Monday": {
        "8:30-9:30": ["Room(322)"],
        "9:40-10:40": [""],  # Free
        "10:50-11:50": ["Room(322)"],
        "11:50-12:40": [""],  # Lunchtime
        "12:40-1:40": ["Room(233)"],
        "1:50-2:50": ["Room(245)"],
        "3:00-4:00": ["Room(245)"]
    },
    "Tuesday": {
        "8:30-9:30": [""],  # Free
        "9:40-10:40": ["Room(232)"],
        "10:50-11:50": ["Room(245)"],
        "11:50-12:40": [""],  # Lunchtime
        "12:40-1:40": ["Room(321)"],
        "1:50-2:50": [""],  # Free
        "3:00-4:00": ["Room(326)"]
    },
    "Wednesday": {
        "8:30-9:30": ["Room(322)"],
        "9:40-10:40": ["Room(334)"],
        "10:50-11:50": ["Room(322)"],
        "11:50-12:40": [""],  # Lunchtime
        "12:40-1:40": ["Room(322)"],
        "1:50-2:50": [""],  # Free
        "3:00-4:00": [""]  # Free
    },
    "Thursday": {
        "8:30-9:30": [""],  # Free
        "9:40-10:40": ["Room(322)"],
        "10:50-11:50": ["Room(322)"],
        "11:50-12:40": [""],  # Lunchtime
        "12:40-1:40": ["Room(321)"],
        "1:50-2:50": ["Room(321)"],
        "3:00-4:00": ["Room(321)"]
    },
    "Friday": {
        "8:30-9:30": ["Room(321)"],
        "9:40-10:40": ["Room(245)"],
        "10:50-11:50": ["Room(333)"],
        "11:50-12:40": [""],  # Lunchtime
        "12:40-1:40": ["Room(244)"],
        "1:50-2:50": ["Room(322)"],
        "3:00-4:00": ["Room(322)"]
    }
},
    "Section_C": {
    "Monday": {
        "8:30-9:30": ["Room(323)"],
        "9:40-10:40": [""],
        "10:50-11:50": ["Room(321)"],
        "11:50-12:40": [""],
        "12:40-1:40": ["Room(321)"],
        "1:50-2:50": ["Room(321)"],
        "3:00-4:00": ["Room(321)"]
    },
    "Tuesday": {
        "8:30-9:30": [""],
        "9:40-10:40": ["Room(323)"],
        "10:50-11:50": ["Room(321)"],
        "11:50-12:40": [""],
        "12:40-1:40": ["Room(321)"],
        "1:50-2:50": ["Room(321)"],
        "3:00-4:00": ["Room(321)"]
    },
    "Wednesday": {
        "8:30-9:30": ["Room(323)"],
        "9:40-10:40": ["Room(323)"],
        "10:50-11:50": ["Room(321)"],
        "11:50-12:40": [""],
        "12:40-1:40": ["Room(321)"],
        "1:50-2:50": [""],
        "3:00-4:00": [""]
    },
    "Thursday": {
        "8:30-9:30": [""],
        "9:40-10:40": ["Room(323)"],
        "10:50-11:50": ["Room(321)"],
        "11:50-12:40": [""],
        "12:40-1:40": ["Room(321)"],
        "1:50-2:50": ["Room(321)"],
        "3:00-4:00": [""]
    },
    "Friday": {
        "8:30-9:30": ["Room(323)"],
        "9:40-10:40": ["Room(323)"],
        "10:50-11:50": ["Room(321)"],
        "11:50-12:40": [""],
        "12:40-1:40": ["Room(321)"],
        "1:50-2:50": ["Room(321)"],
        "3:00-4:00": ["Room(321)"]
    }
},
     "First_Year_Section_E": {
        "Monday": {
            "8:30-9:30": [""],  # Free period
            "9:40-10:40": ["Room(322)"],
            "10:50-11:50": ["Room(323)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(325)"],
            "1:50-2:50": ["Room(325)"],
            "3:00-4:00": ["Room(323)"]
        },
        "Tuesday": {
            "8:30-9:30": ["Room(322)"],
            "9:40-10:40": ["Room(334)"],
            "10:50-11:50": ["Room(323)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(232)"],
            "1:50-2:50": ["Room(245)"],
            "3:00-4:00": ["Room(245)"]
        },
        "Wednesday": {
            "8:30-9:30": ["Room(325)"],
            "9:40-10:40": ["Room(245)"],
            "10:50-11:50": [""],  # Free period
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": [""],  # Free period
            "1:50-2:50": ["Room(324)"],
            "3:00-4:00": [""]
        },
        "Thursday": {
            "8:30-9:30": ["Room(324)"],
            "9:40-10:40": [""],  # Free period
            "10:50-11:50": ["Room(231)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(323)"],
            "1:50-2:50": ["Room(321)"],
            "3:00-4:00": ["Room(324)"]
        },
        "Friday": {
            "8:30-9:30": ["Room(323)"],
            "9:40-10:40": ["Room(323)"],
            "10:50-11:50": ["Room(323)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(323)"],
            "1:50-2:50": ["Room(324)"],
            "3:00-4:00": [""]
        }
    },
    "Second_Year_Section_A": {
        "Monday": {
            "8:30-9:30": ["Room(324)"],
            "9:40-10:40": ["Room(323)"],
            "10:50-11:50": ["Room(326)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(326)"],
            "1:50-2:50": ["Room(326)"],
            "3:00-4:00": [""]  # Free
        },
        "Tuesday": {
            "8:30-9:30": ["Room(324)"],
            "9:40-10:40": [""],
            "10:50-11:50": ["Room(231)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(323)"],
            "1:50-2:50": ["Room(324)"],
            "3:00-4:00": ["Room(232)"]  # Free
        },
        "Wednesday": {
            "8:30-9:30": ["Room(326)"],
            "9:40-10:40": ["Room(322)"],
            "10:50-11:50": ["Room(324)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(331)"],
            "1:50-2:50": [""],  # Free
            "3:00-4:00": [""]  # Free
        },
        "Thursday": {
            "8:30-9:30": [""],
            "9:40-10:40": ["Room(244)"],
            "10:50-11:50": ["Room(325)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(231)"],
            "1:50-2:50": ["Room(231)"],
            "3:00-4:00": ["Room(324)"]  # Free
        },
        "Friday": {
            "8:30-9:30": [""],
            "9:40-10:40": ["Room(324)"],
            "10:50-11:50": ["Room(324)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(324)"],
            "1:50-2:50": ["Room(325)"],
            "3:00-4:00": ["Room(325)"]  
        }
    },
    "Second_Year_Section_B": {
        "Monday": {
            "8:30-9:30": ["Room(325)"],
            "9:40-10:40": [""],
            "10:50-11:50": ["Room(331)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(331)"],
            "1:50-2:50": ["Room(331)"],
            "3:00-4:00": ["Room(325)"]  # Free
        },
        "Tuesday": {
            "8:30-9:30": ["Room(332)"],
            "9:40-10:40": [""],
            "10:50-11:50": ["Room(324)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(324)"],
            "1:50-2:50": ["Room(232)"],
            "3:00-4:00": ["Room(233)"]  # Free
        },
        "Wednesday": {
            "8:30-9:30": ["Room(331)"],
            "9:40-10:40": ["Room(233)"],
            "10:50-11:50": ["Room(325)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(233)"],
            "1:50-2:50": [""],
            "3:00-4:00": [""]  # Free
        },
        "Thursday": {
            "8:30-9:30": ["Room(326)"],
            "9:40-10:40": ["Room(323)"],
            "10:50-11:50": ["Room(326)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(324)"],
            "1:50-2:50": ["Room(325)"],
            "3:00-4:00": [""]  # Free
        },
        "Friday": {
            "8:30-9:30": [""],
            "9:40-10:40": ["Room(244)"],
            "10:50-11:50": ["Room(325)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(325)"],
            "1:50-2:50": ["Room(326)"],
            "3:00-4:00": ["Room(326)"]  
        }
    },
    "Second_Year_Section_C": {
        "Monday": {
            "8:30-9:30": ["Room(326)"],
            "9:40-10:40": ["Room(324)"],
            "10:50-11:50": [""],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(332)"],
            "1:50-2:50": ["Room(332)"],
            "3:00-4:00": ["Room(326)"]
        },
        "Tuesday": {
            "8:30-9:30": [""],
            "9:40-10:40": ["Room(335)"],
            "10:50-11:50": ["Room(325)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(233)"],
            "1:50-2:50": ["Room(325)"],
            "3:00-4:00": ["Room(234)"]
        },
        "Wednesday": {
            "8:30-9:30": ["Room(332)"],
            "9:40-10:40": ["Room(234)"],
            "10:50-11:50": ["Room(326)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(324)"],
            "1:50-2:50": [""] , # Free,
            "3:00-4:00": [""]
        },
        "Thursday": {
            "8:30-9:30": [""],
            "9:40-10:40": ["Room(324)"],
            "10:50-11:50": ["Room(331)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(232)"],
            "1:50-2:50": ["Room(326)"],
            "3:00-4:00": ["Room(325)"]
        },
        "Friday": {
            "8:30-9:30": ["Room(244)"],
            "9:40-10:40": ["Room(326)"],
            "10:50-11:50": ["Room(326)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": [""],
            "1:50-2:50": ["Room(331)"],
            "3:00-4:00": ["Room(331)"]
        }
    },
    "Second_Year_Section_D": {
        "Monday": {
            "8:30-9:30": [""],
            "9:40-10:40": ["Room(325)"],
            "10:50-11:50": ["Room(333)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(333)"],
            "1:50-2:50": ["Room(333)"],
            "3:00-4:00": ["Room(331)"]
        },
        "Tuesday": {
            "8:30-9:30": ["Room(325)"],
            "9:40-10:40": ["Room(244)"],
            "10:50-11:50": ["Room(326)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(234)"],
            "1:50-2:50": ["Room(233)"],
            "3:00-4:00": ["Room(324)"]
        },
        "Wednesday": {
            "8:30-9:30": ["Room(333)"],
            "9:40-10:40": ["Room(334)"],
            "10:50-11:50": ["Room(331)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(234)"],
            "1:50-2:50": [""],
            "3:00-4:00": [""]  # Free
        },
        "Thursday": {
            "8:30-9:30": ["Room(331)"],
            "9:40-10:40": ["Room(325)"],
            "10:50-11:50": [""],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(214)"],
            "1:50-2:50": [""],
            "3:00-4:00": ["Room(326)"]  # Free
        },
        "Friday": {
            "8:30-9:30": [""],
            "9:40-10:40": ["Room(231)"],
            "10:50-11:50": ["Room(331)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(326)"],
            "1:50-2:50": ["Room(332)"],
            "3:00-4:00": ["Room(332)"]
        }
    },
    "Second_Year_Section_E": {
        "Monday": {
            "8:30-9:30": ["Room(331)"],
            "9:40-10:40": [""],
            "10:50-11:50": ["Room(334)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(334)"],
            "1:50-2:50": ["Room(334)"],
            "3:00-4:00": [""]
        },
        "Tuesday": {
            "8:30-9:30": ["Room(326)"],
            "9:40-10:40": [""],
            "10:50-11:50": ["Room(232)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(325)"],
            "1:50-2:50": ["Room(234)"],
            "3:00-4:00": ["Room(325)"]
        },
        "Wednesday": {
            "8:30-9:30": ["Room(334)"],
            "9:40-10:40": ["Room(323)"],
            "10:50-11:50": ["Room(231)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(325)"],
            "1:50-2:50": [""],
            "3:00-4:00": [""]  # Free
        },
        "Thursday": {
            "8:30-9:30": ["Room(332)"],
            "9:40-10:40": ["Room(235)"],
            "10:50-11:50": ["Room(244)"],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(325)"],
            "1:50-2:50": ["Room(331)"],
            "3:00-4:00": ["Room(331)"]
        },
        "Friday": {
            "8:30-9:30": ["Room(336)"],
            "9:40-10:40": ["Room(331)"],
            "10:50-11:50": [""],
            "11:50-12:40": [""],  # Lunchtime (all rooms free)
            "12:40-1:40": ["Room(331)"],
            "1:50-2:50": ["Room(333)"],
            "3:00-4:00": ["Room(333)"]
        }
    }
}

# Define all possible rooms
all_rooms = set(range(321, 327)) | set(range(331, 337)) | set(range(231, 237))

def find_free_rooms(day, time):
    # Special case: Lunchtime (11:50-12:40)
    if time == "11:50-12:40":
        return sorted(all_rooms)  # All rooms are free during lunchtime

    booked_rooms = set()
    for section, days in timetables.items():
        if day in days:
            if time in days[day]:
                # Extract booked rooms (ignore free slots represented as [""])
                for room in days[day][time]:
                    if room:  # Check if the room is not an empty string
                        booked_rooms.add(int(room[5:-1]))  # Extract room number
    free_rooms = all_rooms - booked_rooms
    return sorted(free_rooms)

# Streamlit app
st.title("University Room Availability Checker")

# Dropdown for day selection
day = st.selectbox("Select Day", ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"])

# Dropdown for time selection
time = st.selectbox("Select Time", ["8:30-9:30", "9:40-10:40", "10:50-11:50", "11:50-12:40", "12:40-1:40", "1:50-2:50", "3:00-4:00"])

# Button to find free rooms
if st.button("Find Free Rooms"):
    free_rooms = find_free_rooms(day, time)
    if free_rooms:
        st.success(f"Free rooms on {day} at {time}: {free_rooms}")
    else:
        st.warning("No free rooms available at the selected time.")